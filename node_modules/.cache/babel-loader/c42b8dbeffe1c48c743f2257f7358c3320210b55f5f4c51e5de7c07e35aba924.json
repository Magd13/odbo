{"ast":null,"code":"'use strict';\n\nvar isNumeric = require('fast-isnumeric');\nvar Lib = require('../../lib');\nvar attributes = require('./attributes');\nvar handleDomainDefaults = require('../../plots/domain').defaults;\nvar handleText = require('../bar/defaults').handleText;\nvar coercePattern = require('../../lib').coercePattern;\nfunction handleLabelsAndValues(labels, values) {\n  var hasLabels = Array.isArray(labels);\n  var hasValues = Lib.isArrayOrTypedArray(values);\n  var len = Math.min(hasLabels ? labels.length : Infinity, hasValues ? values.length : Infinity);\n  if (!isFinite(len)) len = 0;\n  if (len && hasValues) {\n    var hasPositive;\n    for (var i = 0; i < len; i++) {\n      var v = values[i];\n      if (isNumeric(v) && v > 0) {\n        hasPositive = true;\n        break;\n      }\n    }\n    if (!hasPositive) len = 0;\n  }\n  return {\n    hasLabels: hasLabels,\n    hasValues: hasValues,\n    len: len\n  };\n}\nfunction handleMarkerDefaults(traceIn, traceOut, layout, coerce, isPie) {\n  var lineWidth = coerce('marker.line.width');\n  if (lineWidth) {\n    coerce('marker.line.color', isPie ? undefined : layout.paper_bgcolor // case of funnelarea, sunburst, icicle, treemap\n    );\n  }\n  var markerColors = coerce('marker.colors');\n  coercePattern(coerce, 'marker.pattern', markerColors);\n  // push the marker colors (with s) to the foreground colors, to work around logic in the drawing pattern code on marker.color (without s, which is okay for a bar trace)\n  if (traceIn.marker && !traceOut.marker.pattern.fgcolor) traceOut.marker.pattern.fgcolor = traceIn.marker.colors;\n  if (!traceOut.marker.pattern.bgcolor) traceOut.marker.pattern.bgcolor = layout.paper_bgcolor;\n}\nfunction supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n  }\n  var labels = coerce('labels');\n  var values = coerce('values');\n  var res = handleLabelsAndValues(labels, values);\n  var len = res.len;\n  traceOut._hasLabels = res.hasLabels;\n  traceOut._hasValues = res.hasValues;\n  if (!traceOut._hasLabels && traceOut._hasValues) {\n    coerce('label0');\n    coerce('dlabel');\n  }\n  if (!len) {\n    traceOut.visible = false;\n    return;\n  }\n  traceOut._length = len;\n  handleMarkerDefaults(traceIn, traceOut, layout, coerce, true);\n  coerce('scalegroup');\n  // TODO: hole needs to be coerced to the same value within a scaleegroup\n\n  var textData = coerce('text');\n  var textTemplate = coerce('texttemplate');\n  var textInfo;\n  if (!textTemplate) textInfo = coerce('textinfo', Array.isArray(textData) ? 'text+percent' : 'percent');\n  coerce('hovertext');\n  coerce('hovertemplate');\n  if (textTemplate || textInfo && textInfo !== 'none') {\n    var textposition = coerce('textposition');\n    handleText(traceIn, traceOut, layout, coerce, textposition, {\n      moduleHasSelected: false,\n      moduleHasUnselected: false,\n      moduleHasConstrain: false,\n      moduleHasCliponaxis: false,\n      moduleHasTextangle: false,\n      moduleHasInsideanchor: false\n    });\n    var hasBoth = Array.isArray(textposition) || textposition === 'auto';\n    var hasOutside = hasBoth || textposition === 'outside';\n    if (hasOutside) {\n      coerce('automargin');\n    }\n    if (textposition === 'inside' || textposition === 'auto' || Array.isArray(textposition)) {\n      coerce('insidetextorientation');\n    }\n  }\n  handleDomainDefaults(traceOut, layout, coerce);\n  var hole = coerce('hole');\n  var title = coerce('title.text');\n  if (title) {\n    var titlePosition = coerce('title.position', hole ? 'middle center' : 'top center');\n    if (!hole && titlePosition === 'middle center') traceOut.title.position = 'top center';\n    Lib.coerceFont(coerce, 'title.font', layout.font);\n  }\n  coerce('sort');\n  coerce('direction');\n  coerce('rotation');\n  coerce('pull');\n}\nmodule.exports = {\n  handleLabelsAndValues: handleLabelsAndValues,\n  handleMarkerDefaults: handleMarkerDefaults,\n  supplyDefaults: supplyDefaults\n};","map":{"version":3,"names":["isNumeric","require","Lib","attributes","handleDomainDefaults","defaults","handleText","coercePattern","handleLabelsAndValues","labels","values","hasLabels","Array","isArray","hasValues","isArrayOrTypedArray","len","Math","min","length","Infinity","isFinite","hasPositive","i","v","handleMarkerDefaults","traceIn","traceOut","layout","coerce","isPie","lineWidth","undefined","paper_bgcolor","markerColors","marker","pattern","fgcolor","colors","bgcolor","supplyDefaults","defaultColor","attr","dflt","res","_hasLabels","_hasValues","visible","_length","textData","textTemplate","textInfo","textposition","moduleHasSelected","moduleHasUnselected","moduleHasConstrain","moduleHasCliponaxis","moduleHasTextangle","moduleHasInsideanchor","hasBoth","hasOutside","hole","title","titlePosition","position","coerceFont","font","module","exports"],"sources":["C:/Users/Magdiel/node_modules/plotly.js/src/traces/pie/defaults.js"],"sourcesContent":["'use strict';\n\nvar isNumeric = require('fast-isnumeric');\nvar Lib = require('../../lib');\nvar attributes = require('./attributes');\nvar handleDomainDefaults = require('../../plots/domain').defaults;\nvar handleText = require('../bar/defaults').handleText;\nvar coercePattern = require('../../lib').coercePattern;\n\nfunction handleLabelsAndValues(labels, values) {\n    var hasLabels = Array.isArray(labels);\n    var hasValues = Lib.isArrayOrTypedArray(values);\n    var len = Math.min(\n        hasLabels ? labels.length : Infinity,\n        hasValues ? values.length : Infinity\n    );\n\n    if(!isFinite(len)) len = 0;\n\n    if(len && hasValues) {\n        var hasPositive;\n        for(var i = 0; i < len; i++) {\n            var v = values[i];\n            if(isNumeric(v) && v > 0) {\n                hasPositive = true;\n                break;\n            }\n        }\n        if(!hasPositive) len = 0;\n    }\n\n    return {\n        hasLabels: hasLabels,\n        hasValues: hasValues,\n        len: len\n    };\n}\n\nfunction handleMarkerDefaults(traceIn, traceOut, layout, coerce, isPie) {\n    var lineWidth = coerce('marker.line.width');\n    if(lineWidth) {\n        coerce('marker.line.color',\n            isPie ? undefined :\n            layout.paper_bgcolor // case of funnelarea, sunburst, icicle, treemap\n        );\n    }\n\n    var markerColors = coerce('marker.colors');\n    coercePattern(coerce, 'marker.pattern', markerColors);\n    // push the marker colors (with s) to the foreground colors, to work around logic in the drawing pattern code on marker.color (without s, which is okay for a bar trace)\n    if(traceIn.marker && !traceOut.marker.pattern.fgcolor) traceOut.marker.pattern.fgcolor = traceIn.marker.colors;\n    if(!traceOut.marker.pattern.bgcolor) traceOut.marker.pattern.bgcolor = layout.paper_bgcolor;\n}\n\nfunction supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n    function coerce(attr, dflt) {\n        return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n    }\n\n    var labels = coerce('labels');\n    var values = coerce('values');\n\n    var res = handleLabelsAndValues(labels, values);\n    var len = res.len;\n    traceOut._hasLabels = res.hasLabels;\n    traceOut._hasValues = res.hasValues;\n\n    if(!traceOut._hasLabels &&\n        traceOut._hasValues\n    ) {\n        coerce('label0');\n        coerce('dlabel');\n    }\n\n    if(!len) {\n        traceOut.visible = false;\n        return;\n    }\n    traceOut._length = len;\n\n    handleMarkerDefaults(traceIn, traceOut, layout, coerce, true);\n\n    coerce('scalegroup');\n    // TODO: hole needs to be coerced to the same value within a scaleegroup\n\n    var textData = coerce('text');\n    var textTemplate = coerce('texttemplate');\n    var textInfo;\n    if(!textTemplate) textInfo = coerce('textinfo', Array.isArray(textData) ? 'text+percent' : 'percent');\n\n    coerce('hovertext');\n    coerce('hovertemplate');\n\n    if(textTemplate || (textInfo && textInfo !== 'none')) {\n        var textposition = coerce('textposition');\n        handleText(traceIn, traceOut, layout, coerce, textposition, {\n            moduleHasSelected: false,\n            moduleHasUnselected: false,\n            moduleHasConstrain: false,\n            moduleHasCliponaxis: false,\n            moduleHasTextangle: false,\n            moduleHasInsideanchor: false\n        });\n\n        var hasBoth = Array.isArray(textposition) || textposition === 'auto';\n        var hasOutside = hasBoth || textposition === 'outside';\n        if(hasOutside) {\n            coerce('automargin');\n        }\n\n        if(textposition === 'inside' || textposition === 'auto' || Array.isArray(textposition)) {\n            coerce('insidetextorientation');\n        }\n    }\n\n    handleDomainDefaults(traceOut, layout, coerce);\n\n    var hole = coerce('hole');\n    var title = coerce('title.text');\n    if(title) {\n        var titlePosition = coerce('title.position', hole ? 'middle center' : 'top center');\n        if(!hole && titlePosition === 'middle center') traceOut.title.position = 'top center';\n        Lib.coerceFont(coerce, 'title.font', layout.font);\n    }\n\n    coerce('sort');\n    coerce('direction');\n    coerce('rotation');\n    coerce('pull');\n}\n\nmodule.exports = {\n    handleLabelsAndValues: handleLabelsAndValues,\n    handleMarkerDefaults: handleMarkerDefaults,\n    supplyDefaults: supplyDefaults\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}